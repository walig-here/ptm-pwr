A51 MACRO ASSEMBLER  LAB1                                                                 03/06/2023 19:20:03 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\lab1.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE lab1.asm SET(SMALL) DEBUG PRINT(.\Listings\lab1.lst) OBJECT(.\Objects\l
                      ab1.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;=====================================================================
                       2     ;                                               DEKLARACJA SEGMENTÓW
                       3     
                       4     TEST_CODE       SEGMENT CODE                                    ; kod testów procedur   
                       5     TASK_CODE       SEGMENT CODE                                    ; kod realizujacy polecenia
                              z listy zadan
                       6     
                       7     ;=====================================================================  
                       8     ;                                               STALE
                       9     
                      10     ;---------------------------------------------------------------------
                      11     ; Zadanie 1 - Stale
                      12     ;---------------------------------------------------------------------
  0010                13     NUM             EQU                     16                              ; Liczba 2-batjowa
  0030                14     NUM_ADR         EQU                     30h                             ; Adres mlodszego b
                             itu liczby NUM
                      15     
                      16     ;=====================================================================
                      17     ;                                               KOD STARTOWY
                      18     
----                  19                             CSEG AT         0
0000 020000   F       20                             LJMP            test_once
                      21     
                      22     ;=====================================================================
                      23     ;                                               TESTY POPRAWNOSCI
                      24                     
----                  25                             RSEG            TEST_CODE
                      26                     
                      27     ;---------------------------------------------------------------------
                      28     ; Test procedury - wywolanie jednorazowe
                      29     ;---------------------------------------------------------------------
0000                  30     test_once:
0000 7830             31                             MOV                     R0, #NUM_ADR            ; liczba w komorkac
                             h IRAM 30h i 31h
0002 120000   F       32                             LCALL           task1                           ; wywolanie procedu
                             ry
0005 80FE             33                             SJMP            $                                       ; petla bez
                              konca
                      34     
                      35     
                      36     ;---------------------------------------------------------------------
                      37     ; Test procedury - wywolanie powtarzane
                      38     ;---------------------------------------------------------------------
0007                  39     test_multi:
0007 908000           40     loop:           MOV                     DPTR, #8000h            ; liczba w komorkach XRAM 8
                             000h i 8001h
000A 120000   F       41                             LCALL           task1                           ; wywolanie procedu
                             ry
000D 80F8             42                             SJMP            loop                            ; powtarzanie
                      43     
                      44     ;=====================================================================          
                      45     ;                                               REALIZACJA ZADAN
                      46             
----                  47                             RSEG            TASK_CODE
                      48     
                      49     ;---------------------------------------------------------------------
                      50     ; ZADANIE 1
A51 MACRO ASSEMBLER  LAB1                                                                 03/06/2023 19:20:03 PAGE     2

                      51     ; Inkrementuje liczbe dwubajtowa zapisana w pamieci IRAM.
                      52     ; Wejscie:      R0 - adres mlodszego bajtu liczby
                      53     ; Wyjscie:      Zinkrementowana liczba zapisana na 2 bajtach pamieci IRAM
                      54     ;                       od komórki o adresie NUM_ADR
                      55     ; Uzywane:      R0
                      56     ;---------------------------------------------------------------------
0000                  57     task1:  
0000 7610             58                             MOV                     @R0, #LOW(NUM)          ; Wprowadzenie wart
                             osci 2-bajtowej do pamieci
0002 08               59                             INC                     R0
0003 7600             60                             MOV                     @R0, #HIGH(NUM)
0005 18               61                             DEC                     R0
                      62                             
0006 06               63                             INC                     @R0                                     ; W
                             lasciwa inkrementacja - wykorzystanie CJNE
0007 B60002           64                             CJNE            @R0, #0, end_taks1
000A 08               65                             INC                     R0
000B 06               66                             INC                     @R0
000C                  67     end_taks1:  
000C 7800             68                             MOV                     R0, #0                          ; Koniec pr
                             ocdury
000E 22               69                             RET                                                             
                      70                     
                      71                     
                      72     ;=====================================================================  
                      73     ;                                               DEKLARACJA ZMIENNYCH
                      74     
                      75     ;---------------------------------------------------------------------
                      76     ; Zadanie 1 - Zmienne
                      77     ;---------------------------------------------------------------------  
                      78     
                      79     ;=====================================================================  
                      80     
                      81     END
A51 MACRO ASSEMBLER  LAB1                                                                 03/06/2023 19:20:03 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

END_TAKS1. . . . .  C ADDR   000CH   R   SEG=TASK_CODE
LOOP . . . . . . .  C ADDR   0007H   R   SEG=TEST_CODE
NUM. . . . . . . .  N NUMB   0010H   A   
NUM_ADR. . . . . .  N NUMB   0030H   A   
TASK1. . . . . . .  C ADDR   0000H   R   SEG=TASK_CODE
TASK_CODE. . . . .  C SEG    000FH       REL=UNIT
TEST_CODE. . . . .  C SEG    000FH       REL=UNIT
TEST_MULTI . . . .  C ADDR   0007H   R   SEG=TEST_CODE
TEST_ONCE. . . . .  C ADDR   0000H   R   SEG=TEST_CODE


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
